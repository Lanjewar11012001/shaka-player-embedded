<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Shaka Player Embedded: shaka::eme::Implementation Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Shaka Player Embedded
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceshaka.html">shaka</a></li><li class="navelem"><a class="el" href="namespaceshaka_1_1eme.html">eme</a></li><li class="navelem"><a class="el" href="classshaka_1_1eme_1_1Implementation.html">Implementation</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classshaka_1_1eme_1_1Implementation-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">shaka::eme::Implementation Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span><div class="ingroups"><a class="el" href="group__exported.html">Public Types</a> &raquo; <a class="el" href="group__eme.html">EME Implementations</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="implementation_8h_source.html">implementation.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for shaka::eme::Implementation:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classshaka_1_1eme_1_1Implementation.png" usemap="#shaka::eme::Implementation_map" alt=""/>
  <map id="shaka::eme::Implementation_map" name="shaka::eme::Implementation_map">
<area href="classshaka_1_1eme_1_1ClearKeyImplementation.html" alt="shaka::eme::ClearKeyImplementation" shape="rect" coords="0,56,215,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a79d57ff35462753e90036d76c1d474e5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1Implementation.html#a79d57ff35462753e90036d76c1d474e5">Implementation</a> ()</td></tr>
<tr class="separator:a79d57ff35462753e90036d76c1d474e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa795ce22c3cb8ac12075f43e6e2cd0a1"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1Implementation.html#aa795ce22c3cb8ac12075f43e6e2cd0a1">~ Implementation</a> ()</td></tr>
<tr class="separator:aa795ce22c3cb8ac12075f43e6e2cd0a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af439103ff14bd720ba5edc8e66cccd83"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1Implementation.html#af439103ff14bd720ba5edc8e66cccd83">Implementation</a> (const <a class="el" href="classshaka_1_1eme_1_1Implementation.html">Implementation</a> &amp;)=delete</td></tr>
<tr class="separator:af439103ff14bd720ba5edc8e66cccd83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f9ab88a3ee63206d0520b6756f9e79e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classshaka_1_1eme_1_1Implementation.html">Implementation</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1Implementation.html#a2f9ab88a3ee63206d0520b6756f9e79e">operator=</a> (const <a class="el" href="classshaka_1_1eme_1_1Implementation.html">Implementation</a> &amp;)=delete</td></tr>
<tr class="separator:a2f9ab88a3ee63206d0520b6756f9e79e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ed7388c75d27c342f5a543b2b1611b3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1Implementation.html#a4ed7388c75d27c342f5a543b2b1611b3">Implementation</a> (<a class="el" href="classshaka_1_1eme_1_1Implementation.html">Implementation</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a4ed7388c75d27c342f5a543b2b1611b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80303271a470e047c4c810a47b3bda80"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classshaka_1_1eme_1_1Implementation.html">Implementation</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1Implementation.html#a80303271a470e047c4c810a47b3bda80">operator=</a> (<a class="el" href="classshaka_1_1eme_1_1Implementation.html">Implementation</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a80303271a470e047c4c810a47b3bda80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f5c06634dcdef921813a3ccc859e938"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1Implementation.html#a4f5c06634dcdef921813a3ccc859e938">GetExpiration</a> (const std::string &amp;session_id, int64_t *expiration) const =0</td></tr>
<tr class="separator:a4f5c06634dcdef921813a3ccc859e938"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48bd8fc6b51da3ef81941423a4bade08"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1Implementation.html#a48bd8fc6b51da3ef81941423a4bade08">GetKeyStatuses</a> (const std::string &amp;session_id, std::vector&lt; <a class="el" href="structshaka_1_1eme_1_1KeyStatusInfo.html">KeyStatusInfo</a> &gt; *statuses) const =0</td></tr>
<tr class="separator:a48bd8fc6b51da3ef81941423a4bade08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a633b3a80a52442ca3f6b9efd3bfc2023"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1Implementation.html#a633b3a80a52442ca3f6b9efd3bfc2023">SetServerCertificate</a> (<a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a> promise, <a class="el" href="classshaka_1_1eme_1_1Data.html">Data</a> cert)=0</td></tr>
<tr class="separator:a633b3a80a52442ca3f6b9efd3bfc2023"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa73b2f43ebfa9477f1228c41aea03085"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1Implementation.html#aa73b2f43ebfa9477f1228c41aea03085">CreateSessionAndGenerateRequest</a> (<a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a> promise, std::function&lt; void(const std::string &amp;)&gt; set_session_id, <a class="el" href="group__eme.html#ga758312bea988b050d2a2c16edd1429f1">MediaKeySessionType</a> session_type, <a class="el" href="group__eme.html#gadf03d085b5131351975708008dffeeac">MediaKeyInitDataType</a> init_data_type, <a class="el" href="classshaka_1_1eme_1_1Data.html">Data</a> data)=0</td></tr>
<tr class="separator:aa73b2f43ebfa9477f1228c41aea03085"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d98fcba3737b4d4676b1e08061f2455"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1Implementation.html#a4d98fcba3737b4d4676b1e08061f2455">Load</a> (const std::string &amp;session_id, <a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a> promise)=0</td></tr>
<tr class="separator:a4d98fcba3737b4d4676b1e08061f2455"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cda56831a4c9b3f7ad176ff3ec7d786"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1Implementation.html#a1cda56831a4c9b3f7ad176ff3ec7d786">Update</a> (const std::string &amp;session_id, <a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a> promise, <a class="el" href="classshaka_1_1eme_1_1Data.html">Data</a> data)=0</td></tr>
<tr class="separator:a1cda56831a4c9b3f7ad176ff3ec7d786"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ef9da285971f4f6e14a71be8297079b"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1Implementation.html#a6ef9da285971f4f6e14a71be8297079b">Close</a> (const std::string &amp;session_id, <a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a> promise)=0</td></tr>
<tr class="separator:a6ef9da285971f4f6e14a71be8297079b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a759d4cedae1c6b4d7234038976a1dcf9"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1Implementation.html#a759d4cedae1c6b4d7234038976a1dcf9">Remove</a> (const std::string &amp;session_id, <a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a> promise)=0</td></tr>
<tr class="separator:a759d4cedae1c6b4d7234038976a1dcf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ea0ef3fac03a27a9eb8c80ca2a36c16"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="group__eme.html#ga538e615366fe4f2044cd1166e186c5a6">DecryptStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1Implementation.html#a4ea0ef3fac03a27a9eb8c80ca2a36c16">Decrypt</a> (const <a class="el" href="classshaka_1_1eme_1_1FrameEncryptionInfo.html">FrameEncryptionInfo</a> *info, const uint8_t *data, size_t data_size, uint8_t *<a class="el" href="media__utils_8cc.html#ad447182ef5af9e4ff1446dbe2507f630">dest</a>) const =0</td></tr>
<tr class="separator:a4ea0ef3fac03a27a9eb8c80ca2a36c16"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An interface for an EME implementation instance. This represents an adapter to a CDM instance. This is a one-to-one mapping to a MediaKeys object in EME. This should create and manage a single CDM instance. This object must remain alive until the Destroy() method is called.</p>
<p>This can spawn background threads as needed to monitor the system. These thread(s) must be deleted inside Destroy().</p>
<p>It is ok to manipulate the filesystem, but it should be done inside the <a class="el" href="classshaka_1_1eme_1_1ImplementationHelper.html#a4c32013ce4fc59c90c4f76d08e3e2957">ImplementationHelper::DataPathPrefix</a> directory.</p>
<p>Many of the actions here are asynchronous. Some are completed by the end of the call here, but are run asynchronously with respect to JavaScript. In either case, those methods are given a <code>promise</code>. Once the operation is complete (error or success), one of the methods on it MUST be called. It is ok to synchronously call those methods.</p>
<p>Most methods here are only called on the JS main thread; the exception is Decrypt, which can be called from any thread, including concurrently with other Decrypt calls. It is highly suggested to avoid exclusive locks in Decrypt so we can get parallel decrypt operations. </p>

<p>Definition at line <a class="el" href="implementation_8h_source.html#l00086">86</a> of file <a class="el" href="implementation_8h_source.html">implementation.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a79d57ff35462753e90036d76c1d474e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79d57ff35462753e90036d76c1d474e5">&sect;&nbsp;</a></span>Implementation() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shaka::eme::Implementation::Implementation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa795ce22c3cb8ac12075f43e6e2cd0a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa795ce22c3cb8ac12075f43e6e2cd0a1">&sect;&nbsp;</a></span>~ Implementation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual shaka::eme::Implementation::~ <a class="el" href="classshaka_1_1eme_1_1Implementation.html">Implementation</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af439103ff14bd720ba5edc8e66cccd83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af439103ff14bd720ba5edc8e66cccd83">&sect;&nbsp;</a></span>Implementation() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">shaka::eme::Implementation::Implementation </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classshaka_1_1eme_1_1Implementation.html">Implementation</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4ed7388c75d27c342f5a543b2b1611b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ed7388c75d27c342f5a543b2b1611b3">&sect;&nbsp;</a></span>Implementation() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">shaka::eme::Implementation::Implementation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classshaka_1_1eme_1_1Implementation.html">Implementation</a> &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6ef9da285971f4f6e14a71be8297079b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ef9da285971f4f6e14a71be8297079b">&sect;&nbsp;</a></span>Close()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void shaka::eme::Implementation::Close </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>session_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a>&#160;</td>
          <td class="paramname"><em>promise</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Closes the given session. This does NOT delete persistent sessions, it only closes the current running session and any runtime data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session_id</td><td>The session ID to close. </td></tr>
    <tr><td class="paramname">promise</td><td>The <a class="el" href="classshaka_1_1Promise.html">Promise</a> object. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#ab33d69d311b2a41805aa5805f0f6f230">shaka::eme::ClearKeyImplementation</a>.</p>

</div>
</div>
<a id="aa73b2f43ebfa9477f1228c41aea03085"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa73b2f43ebfa9477f1228c41aea03085">&sect;&nbsp;</a></span>CreateSessionAndGenerateRequest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void shaka::eme::Implementation::CreateSessionAndGenerateRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a>&#160;</td>
          <td class="paramname"><em>promise</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; void(const std::string &amp;)&gt;&#160;</td>
          <td class="paramname"><em>set_session_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__eme.html#ga758312bea988b050d2a2c16edd1429f1">MediaKeySessionType</a>&#160;</td>
          <td class="paramname"><em>session_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__eme.html#gadf03d085b5131351975708008dffeeac">MediaKeyInitDataType</a>&#160;</td>
          <td class="paramname"><em>init_data_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classshaka_1_1eme_1_1Data.html">Data</a>&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This method creates a new session and generates a license request. This is only called for new session, not for loading persistent sessions.</p>
<p>This should call <em>set_session_id</em> before sending any messages so the session ID is set. The function must only be called once.</p>
<p>This method should create a message to send the license request. This will only be called with init data types where <a class="el" href="classshaka_1_1eme_1_1ImplementationFactory.html#a788359b605d57bb17d0cb889f35708c4">ImplementationFactory::SupportsInitDataType()</a> returns true.</p>
<p>The <a class="el" href="classshaka_1_1Promise.html">Promise</a> should be resolved when the request has been generated, NOT when the response comes back. This should call <a class="el" href="classshaka_1_1eme_1_1ImplementationHelper.html#afecb7979171ede550d2676e008308a00">ImplementationHelper::OnMessage()</a> before resolving the <a class="el" href="classshaka_1_1Promise.html">Promise</a>.</p>
<p>There are situations where this may not generate the license request immediately, for example if the device isn't provisioned. This will still generate a message, but it may not be a license request.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">promise</td><td>The <a class="el" href="classshaka_1_1Promise.html">Promise</a> object. </td></tr>
    <tr><td class="paramname">set_session_id</td><td>A function that accepts the session ID of the new session. </td></tr>
    <tr><td class="paramname">session_type</td><td>The type of session to create. </td></tr>
    <tr><td class="paramname">init_data_type</td><td>The type of init data given </td></tr>
    <tr><td class="paramname">data</td><td>The data contents of the request. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#ab21f50fd5cd9b19ed69eda6a7c26cca2">shaka::eme::ClearKeyImplementation</a>.</p>

</div>
</div>
<a id="a4ea0ef3fac03a27a9eb8c80ca2a36c16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ea0ef3fac03a27a9eb8c80ca2a36c16">&sect;&nbsp;</a></span>Decrypt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="group__eme.html#ga538e615366fe4f2044cd1166e186c5a6">DecryptStatus</a> shaka::eme::Implementation::Decrypt </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classshaka_1_1eme_1_1FrameEncryptionInfo.html">FrameEncryptionInfo</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Decrypts the given data. This is given a whole frame and is expected to decrypt the encrypted portions and copy over clear portions. This method doesn't need to handle containers or codecs, all it needs to do is decrypt and copy the data. If the data needs to be processed before decryption (e.g. for MPEG2-TS), it is done by the caller.</p>
<p>If pattern is (0, 0), then this is not using pattern encryption (e.g. for "cenc" or "cbc1").</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">info</td><td>Contains information about how the frame is encrypted. </td></tr>
    <tr><td class="paramname">data</td><td>The data to decrypt. </td></tr>
    <tr><td class="paramname">data_size</td><td>The size of |data|. </td></tr>
    <tr><td class="paramname">dest</td><td>The destination buffer to hold the decrypted data. Is at least |data_size| bytes large. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The resulting status code. </dd></dl>

<p>Implemented in <a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#a6f8919b2f2eedf476e614ea00c49f104">shaka::eme::ClearKeyImplementation</a>.</p>

</div>
</div>
<a id="a4f5c06634dcdef921813a3ccc859e938"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f5c06634dcdef921813a3ccc859e938">&sect;&nbsp;</a></span>GetExpiration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool shaka::eme::Implementation::GetExpiration </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>session_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t *&#160;</td>
          <td class="paramname"><em>expiration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Gets the expiration of the session. This should give the time in milliseconds since the epoch, or -1 if the session never expires.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session_id</td><td>The ID of the session to get the expiration for. </td></tr>
    <tr><td class="paramname">expiration</td><td>[OUT] Where to put the expiration time. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, false on error. </dd></dl>

<p>Implemented in <a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#aadb7147b458be9b6693438cf3bc7a63e">shaka::eme::ClearKeyImplementation</a>.</p>

</div>
</div>
<a id="a48bd8fc6b51da3ef81941423a4bade08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48bd8fc6b51da3ef81941423a4bade08">&sect;&nbsp;</a></span>GetKeyStatuses()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool shaka::eme::Implementation::GetKeyStatuses </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>session_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structshaka_1_1eme_1_1KeyStatusInfo.html">KeyStatusInfo</a> &gt; *&#160;</td>
          <td class="paramname"><em>statuses</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Gets the status of each key in the given session. These values can be cached to avoid extra overhead. This means that the key status may have changed but not be reflected yet (e.g. they may have expired).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session_id</td><td>The ID of the session to query. </td></tr>
    <tr><td class="paramname">statuses</td><td>[OUT] Where to put the resulting statuses. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, false on error. </dd></dl>

<p>Implemented in <a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#a03b842af5e58a9d0daab2d5489dc941c">shaka::eme::ClearKeyImplementation</a>.</p>

</div>
</div>
<a id="a4d98fcba3737b4d4676b1e08061f2455"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d98fcba3737b4d4676b1e08061f2455">&sect;&nbsp;</a></span>Load()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void shaka::eme::Implementation::Load </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>session_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a>&#160;</td>
          <td class="paramname"><em>promise</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Loads the given session from persistent storage.</p>
<p>This should use ResolveWith() and pass true if the session was found, false if the session didn't exist. This should still reject for errors.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session_id</td><td>The session ID to load. </td></tr>
    <tr><td class="paramname">promise</td><td>The <a class="el" href="classshaka_1_1Promise.html">Promise</a> object. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#a00d5114faf84283288f210cf006ee5b4">shaka::eme::ClearKeyImplementation</a>.</p>

</div>
</div>
<a id="a80303271a470e047c4c810a47b3bda80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80303271a470e047c4c810a47b3bda80">&sect;&nbsp;</a></span>operator=() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classshaka_1_1eme_1_1Implementation.html">Implementation</a>&amp; shaka::eme::Implementation::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classshaka_1_1eme_1_1Implementation.html">Implementation</a> &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2f9ab88a3ee63206d0520b6756f9e79e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f9ab88a3ee63206d0520b6756f9e79e">&sect;&nbsp;</a></span>operator=() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classshaka_1_1eme_1_1Implementation.html">Implementation</a>&amp; shaka::eme::Implementation::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classshaka_1_1eme_1_1Implementation.html">Implementation</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a759d4cedae1c6b4d7234038976a1dcf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a759d4cedae1c6b4d7234038976a1dcf9">&sect;&nbsp;</a></span>Remove()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void shaka::eme::Implementation::Remove </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>session_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a>&#160;</td>
          <td class="paramname"><em>promise</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Removes any persistent data associated with the given session.</p>
<p>This should generate a 'license-release' message. The session should not actually be deleted until the response is given to <a class="el" href="classshaka_1_1eme_1_1Implementation.html#a1cda56831a4c9b3f7ad176ff3ec7d786">Update()</a>. However, the <a class="el" href="classshaka_1_1Promise.html">Promise</a> should be resolved once the message is generated.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session_id</td><td>The session ID to delete. </td></tr>
    <tr><td class="paramname">promise</td><td>The <a class="el" href="classshaka_1_1Promise.html">Promise</a> object. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#a1b754adf6acccaf608ad36ca622fbb98">shaka::eme::ClearKeyImplementation</a>.</p>

</div>
</div>
<a id="a633b3a80a52442ca3f6b9efd3bfc2023"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a633b3a80a52442ca3f6b9efd3bfc2023">&sect;&nbsp;</a></span>SetServerCertificate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void shaka::eme::Implementation::SetServerCertificate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a>&#160;</td>
          <td class="paramname"><em>promise</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classshaka_1_1eme_1_1Data.html">Data</a>&#160;</td>
          <td class="paramname"><em>cert</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sets the server certificate for the CDM.</p>
<p>This should use <a class="el" href="classshaka_1_1eme_1_1EmePromise.html#a0b13e604be586471d7a035de2cdf3785">EmePromise::ResolveWith()</a> and pass true for supported and false for not supported. This should only reject for errors in the certificate.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">promise</td><td>The <a class="el" href="classshaka_1_1Promise.html">Promise</a> object. </td></tr>
    <tr><td class="paramname">cert</td><td>The data contents of the certificate. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#a5ba69e95950c3e8da38b55427f1cad08">shaka::eme::ClearKeyImplementation</a>.</p>

</div>
</div>
<a id="a1cda56831a4c9b3f7ad176ff3ec7d786"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cda56831a4c9b3f7ad176ff3ec7d786">&sect;&nbsp;</a></span>Update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void shaka::eme::Implementation::Update </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>session_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a>&#160;</td>
          <td class="paramname"><em>promise</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classshaka_1_1eme_1_1Data.html">Data</a>&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Updates the given session with a response from the server.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session_id</td><td>The session ID to use. </td></tr>
    <tr><td class="paramname">promise</td><td>The <a class="el" href="classshaka_1_1Promise.html">Promise</a> object. </td></tr>
    <tr><td class="paramname">data</td><td>The data contents of the response. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#a7a94cdc548706d1f41de0ca99ae4983c">shaka::eme::ClearKeyImplementation</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>shaka/include/shaka/eme/<a class="el" href="implementation_8h_source.html">implementation.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
