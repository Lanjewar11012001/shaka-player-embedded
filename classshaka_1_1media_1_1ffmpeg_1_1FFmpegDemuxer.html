<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Shaka Player Embedded: shaka::media::ffmpeg::FFmpegDemuxer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Shaka Player Embedded
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceshaka.html">shaka</a></li><li class="navelem"><a class="el" href="namespaceshaka_1_1media.html">media</a></li><li class="navelem"><a class="el" href="namespaceshaka_1_1media_1_1ffmpeg.html">ffmpeg</a></li><li class="navelem"><a class="el" href="classshaka_1_1media_1_1ffmpeg_1_1FFmpegDemuxer.html">FFmpegDemuxer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classshaka_1_1media_1_1ffmpeg_1_1FFmpegDemuxer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">shaka::media::ffmpeg::FFmpegDemuxer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="ffmpeg__demuxer_8h_source.html">ffmpeg_demuxer.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for shaka::media::ffmpeg::FFmpegDemuxer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classshaka_1_1media_1_1ffmpeg_1_1FFmpegDemuxer.png" usemap="#shaka::media::ffmpeg::FFmpegDemuxer_map" alt=""/>
  <map id="shaka::media::ffmpeg::FFmpegDemuxer_map" name="shaka::media::ffmpeg::FFmpegDemuxer_map">
<area href="classshaka_1_1media_1_1Demuxer.html" alt="shaka::media::Demuxer" shape="rect" coords="0,0,230,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af5e9e6df9b415da271ffdb5abd7df15d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1media_1_1ffmpeg_1_1FFmpegDemuxer.html#af5e9e6df9b415da271ffdb5abd7df15d">FFmpegDemuxer</a> (<a class="el" href="classshaka_1_1media_1_1Demuxer_1_1Client.html">Demuxer::Client</a> *client, const std::string &amp;mime_type, const std::string &amp;container)</td></tr>
<tr class="separator:af5e9e6df9b415da271ffdb5abd7df15d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a576335cdb8a2f307eb71636af92da8e8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1media_1_1ffmpeg_1_1FFmpegDemuxer.html#a576335cdb8a2f307eb71636af92da8e8">~FFmpegDemuxer</a> () override</td></tr>
<tr class="separator:a576335cdb8a2f307eb71636af92da8e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b1463d210603e5deaee9b7b76f5f0ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1media_1_1ffmpeg_1_1FFmpegDemuxer.html#a3b1463d210603e5deaee9b7b76f5f0ed">Reset</a> () override</td></tr>
<tr class="separator:a3b1463d210603e5deaee9b7b76f5f0ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07ff253ab815e46a58ae290c8ed411e0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1media_1_1ffmpeg_1_1FFmpegDemuxer.html#a07ff253ab815e46a58ae290c8ed411e0">Demux</a> (double timestamp_offset, const uint8_t *data, size_t size, std::vector&lt; std::shared_ptr&lt; <a class="el" href="classshaka_1_1media_1_1EncodedFrame.html">EncodedFrame</a> &gt;&gt; *<a class="el" href="streams_8cc.html#a42a0256d54eab4dd6dcd1379fcdbc420">frames</a>) override</td></tr>
<tr class="separator:a07ff253ab815e46a58ae290c8ed411e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classshaka_1_1media_1_1Demuxer"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classshaka_1_1media_1_1Demuxer')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classshaka_1_1media_1_1Demuxer.html">shaka::media::Demuxer</a></td></tr>
<tr class="memitem:af6486813965166476551f2fb6aedfb3f inherit pub_methods_classshaka_1_1media_1_1Demuxer"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1media_1_1Demuxer.html#af6486813965166476551f2fb6aedfb3f">Demuxer</a> ()</td></tr>
<tr class="separator:af6486813965166476551f2fb6aedfb3f inherit pub_methods_classshaka_1_1media_1_1Demuxer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81497b2e227417b4157c2a922c5d6550 inherit pub_methods_classshaka_1_1media_1_1Demuxer"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1media_1_1Demuxer.html#a81497b2e227417b4157c2a922c5d6550">~ Demuxer</a> ()</td></tr>
<tr class="separator:a81497b2e227417b4157c2a922c5d6550 inherit pub_methods_classshaka_1_1media_1_1Demuxer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4923180b24f9b96b5105d037118762d5 inherit pub_methods_classshaka_1_1media_1_1Demuxer"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1media_1_1Demuxer.html#a4923180b24f9b96b5105d037118762d5">Demuxer</a> (const <a class="el" href="classshaka_1_1media_1_1Demuxer.html">Demuxer</a> &amp;)=delete</td></tr>
<tr class="separator:a4923180b24f9b96b5105d037118762d5 inherit pub_methods_classshaka_1_1media_1_1Demuxer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9868240b0dcdccf2d410b819951c145f inherit pub_methods_classshaka_1_1media_1_1Demuxer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classshaka_1_1media_1_1Demuxer.html">Demuxer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1media_1_1Demuxer.html#a9868240b0dcdccf2d410b819951c145f">operator=</a> (const <a class="el" href="classshaka_1_1media_1_1Demuxer.html">Demuxer</a> &amp;)=delete</td></tr>
<tr class="separator:a9868240b0dcdccf2d410b819951c145f inherit pub_methods_classshaka_1_1media_1_1Demuxer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40de80ada96fad4cb942685de7e266f1 inherit pub_methods_classshaka_1_1media_1_1Demuxer"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1media_1_1Demuxer.html#a40de80ada96fad4cb942685de7e266f1">Demuxer</a> (<a class="el" href="classshaka_1_1media_1_1Demuxer.html">Demuxer</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a40de80ada96fad4cb942685de7e266f1 inherit pub_methods_classshaka_1_1media_1_1Demuxer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa97499bd58488526352aa4cdaa0ac494 inherit pub_methods_classshaka_1_1media_1_1Demuxer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classshaka_1_1media_1_1Demuxer.html">Demuxer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1media_1_1Demuxer.html#aa97499bd58488526352aa4cdaa0ac494">operator=</a> (<a class="el" href="classshaka_1_1media_1_1Demuxer.html">Demuxer</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:aa97499bd58488526352aa4cdaa0ac494 inherit pub_methods_classshaka_1_1media_1_1Demuxer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a267d11f04e403aa0de0414b99a7733 inherit pub_methods_classshaka_1_1media_1_1Demuxer"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1media_1_1Demuxer.html#a4a267d11f04e403aa0de0414b99a7733">SwitchType</a> (const std::string &amp;mime_type)</td></tr>
<tr class="separator:a4a267d11f04e403aa0de0414b99a7733 inherit pub_methods_classshaka_1_1media_1_1Demuxer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An implementation of the <a class="el" href="classshaka_1_1media_1_1Demuxer.html">Demuxer</a> type that uses FFmpeg to demux frames. This produces <a class="el" href="classshaka_1_1media_1_1ffmpeg_1_1FFmpegEncodedFrame.html">FFmpegEncodedFrame</a> objects. </p>

<p>Definition at line <a class="el" href="ffmpeg__demuxer_8h_source.html#l00040">40</a> of file <a class="el" href="ffmpeg__demuxer_8h_source.html">ffmpeg_demuxer.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af5e9e6df9b415da271ffdb5abd7df15d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5e9e6df9b415da271ffdb5abd7df15d">&sect;&nbsp;</a></span>FFmpegDemuxer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shaka::media::ffmpeg::FFmpegDemuxer::FFmpegDemuxer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classshaka_1_1media_1_1Demuxer_1_1Client.html">Demuxer::Client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>mime_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>container</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ffmpeg__demuxer_8cc_source.html#l00394">394</a> of file <a class="el" href="ffmpeg__demuxer_8cc_source.html">ffmpeg_demuxer.cc</a>.</p>

</div>
</div>
<a id="a576335cdb8a2f307eb71636af92da8e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a576335cdb8a2f307eb71636af92da8e8">&sect;&nbsp;</a></span>~FFmpegDemuxer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">shaka::media::ffmpeg::FFmpegDemuxer::~FFmpegDemuxer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ffmpeg__demuxer_8cc_source.html#l00412">412</a> of file <a class="el" href="ffmpeg__demuxer_8cc_source.html">ffmpeg_demuxer.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a07ff253ab815e46a58ae290c8ed411e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07ff253ab815e46a58ae290c8ed411e0">&sect;&nbsp;</a></span>Demux()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool shaka::media::ffmpeg::FFmpegDemuxer::Demux </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>timestamp_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::shared_ptr&lt; <a class="el" href="classshaka_1_1media_1_1EncodedFrame.html">EncodedFrame</a> &gt;&gt; *&#160;</td>
          <td class="paramname"><em>frames</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Attempts to demux the given data into some number of encoded frames.</p>
<p>If the data contains multiple streams (i.e. multiplexed content), then all frames will be given and they will be separated based on their <em>stream_info</em> field.</p>
<p>This may be given segments from a different source after starting. This will be first given the init segment for the new stream then the new segments. This should support this case and reinitialize the demxuer if needed. The resulting frames should have different <em>stream_info</em> fields from before, even if they are of the same type and codec.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timestamp_offset</td><td>The current offset to add to the timestamps. </td></tr>
    <tr><td class="paramname">data</td><td>The data to demux. </td></tr>
    <tr><td class="paramname">size</td><td>The number of bytes in data. </td></tr>
    <tr><td class="paramname">frames</td><td>[OUT] Where to insert newly created frames. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, false on error. </dd></dl>

<p>Implements <a class="el" href="classshaka_1_1media_1_1Demuxer.html#a6a0f4513c2d57d0cfe9a8886d02e3f32">shaka::media::Demuxer</a>.</p>

<p>Definition at line <a class="el" href="ffmpeg__demuxer_8cc_source.html#l00435">435</a> of file <a class="el" href="ffmpeg__demuxer_8cc_source.html">ffmpeg_demuxer.cc</a>.</p>

</div>
</div>
<a id="a3b1463d210603e5deaee9b7b76f5f0ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b1463d210603e5deaee9b7b76f5f0ed">&sect;&nbsp;</a></span>Reset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void shaka::media::ffmpeg::FFmpegDemuxer::Reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Resets the demuxer to parse a new stream. This may be called when adapting before parsing a new stream. This should reset any partial reads and should prepare to read from a new stream. This may not be called during adaptation, so the demuxer should still handle getting a new init segment without calling Reset first. </p>

<p>Implements <a class="el" href="classshaka_1_1media_1_1Demuxer.html#aa61e36e87b4f6e062986b8f736354a4b">shaka::media::Demuxer</a>.</p>

<p>Definition at line <a class="el" href="ffmpeg__demuxer_8cc_source.html#l00431">431</a> of file <a class="el" href="ffmpeg__demuxer_8cc_source.html">ffmpeg_demuxer.cc</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>shaka/src/media/ffmpeg/<a class="el" href="ffmpeg__demuxer_8h_source.html">ffmpeg_demuxer.h</a></li>
<li>shaka/src/media/ffmpeg/<a class="el" href="ffmpeg__demuxer_8cc_source.html">ffmpeg_demuxer.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
