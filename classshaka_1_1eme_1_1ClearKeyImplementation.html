<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Shaka Player Embedded: shaka::eme::ClearKeyImplementation Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Shaka Player Embedded
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceshaka.html">shaka</a></li><li class="navelem"><a class="el" href="namespaceshaka_1_1eme.html">eme</a></li><li class="navelem"><a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html">ClearKeyImplementation</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classshaka_1_1eme_1_1ClearKeyImplementation-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">shaka::eme::ClearKeyImplementation Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="clearkey__implementation_8h_source.html">clearkey_implementation.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for shaka::eme::ClearKeyImplementation:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classshaka_1_1eme_1_1ClearKeyImplementation.png" usemap="#shaka::eme::ClearKeyImplementation_map" alt=""/>
  <map id="shaka::eme::ClearKeyImplementation_map" name="shaka::eme::ClearKeyImplementation_map">
<area href="classshaka_1_1eme_1_1Implementation.html" alt="shaka::eme::Implementation" shape="rect" coords="0,0,215,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af3689ca97769d6f06c05810b55f6deb6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#af3689ca97769d6f06c05810b55f6deb6">ClearKeyImplementation</a> (<a class="el" href="classshaka_1_1eme_1_1ImplementationHelper.html">ImplementationHelper</a> *helper)</td></tr>
<tr class="separator:af3689ca97769d6f06c05810b55f6deb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afced27a6756fdf8f2f9470d55325ac27"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#afced27a6756fdf8f2f9470d55325ac27">~ClearKeyImplementation</a> () override</td></tr>
<tr class="separator:afced27a6756fdf8f2f9470d55325ac27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadb7147b458be9b6693438cf3bc7a63e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#aadb7147b458be9b6693438cf3bc7a63e">GetExpiration</a> (const std::string &amp;session_id, int64_t *expiration) const override</td></tr>
<tr class="separator:aadb7147b458be9b6693438cf3bc7a63e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03b842af5e58a9d0daab2d5489dc941c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#a03b842af5e58a9d0daab2d5489dc941c">GetKeyStatuses</a> (const std::string &amp;session_id, std::vector&lt; <a class="el" href="structshaka_1_1eme_1_1KeyStatusInfo.html">KeyStatusInfo</a> &gt; *statuses) const override</td></tr>
<tr class="separator:a03b842af5e58a9d0daab2d5489dc941c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ba69e95950c3e8da38b55427f1cad08"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#a5ba69e95950c3e8da38b55427f1cad08">SetServerCertificate</a> (<a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a> promise, <a class="el" href="classshaka_1_1eme_1_1Data.html">Data</a> cert) override</td></tr>
<tr class="separator:a5ba69e95950c3e8da38b55427f1cad08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab21f50fd5cd9b19ed69eda6a7c26cca2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#ab21f50fd5cd9b19ed69eda6a7c26cca2">CreateSessionAndGenerateRequest</a> (<a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a> promise, std::function&lt; void(const std::string &amp;)&gt; set_session_id, <a class="el" href="group__eme.html#ga758312bea988b050d2a2c16edd1429f1">MediaKeySessionType</a> session_type, <a class="el" href="group__eme.html#gadf03d085b5131351975708008dffeeac">MediaKeyInitDataType</a> init_data_type, <a class="el" href="classshaka_1_1eme_1_1Data.html">Data</a> data) override</td></tr>
<tr class="separator:ab21f50fd5cd9b19ed69eda6a7c26cca2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00d5114faf84283288f210cf006ee5b4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#a00d5114faf84283288f210cf006ee5b4">Load</a> (const std::string &amp;session_id, <a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a> promise) override</td></tr>
<tr class="separator:a00d5114faf84283288f210cf006ee5b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a94cdc548706d1f41de0ca99ae4983c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#a7a94cdc548706d1f41de0ca99ae4983c">Update</a> (const std::string &amp;session_id, <a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a> promise, <a class="el" href="classshaka_1_1eme_1_1Data.html">Data</a> data) override</td></tr>
<tr class="separator:a7a94cdc548706d1f41de0ca99ae4983c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab33d69d311b2a41805aa5805f0f6f230"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#ab33d69d311b2a41805aa5805f0f6f230">Close</a> (const std::string &amp;session_id, <a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a> promise) override</td></tr>
<tr class="separator:ab33d69d311b2a41805aa5805f0f6f230"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b754adf6acccaf608ad36ca622fbb98"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#a1b754adf6acccaf608ad36ca622fbb98">Remove</a> (const std::string &amp;session_id, <a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a> promise) override</td></tr>
<tr class="separator:a1b754adf6acccaf608ad36ca622fbb98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f8919b2f2eedf476e614ea00c49f104"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__eme.html#ga538e615366fe4f2044cd1166e186c5a6">DecryptStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#a6f8919b2f2eedf476e614ea00c49f104">Decrypt</a> (const <a class="el" href="classshaka_1_1eme_1_1FrameEncryptionInfo.html">FrameEncryptionInfo</a> *info, const uint8_t *data, size_t data_size, uint8_t *<a class="el" href="media__utils_8cc.html#ad447182ef5af9e4ff1446dbe2507f630">dest</a>) const override</td></tr>
<tr class="separator:a6f8919b2f2eedf476e614ea00c49f104"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classshaka_1_1eme_1_1Implementation"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classshaka_1_1eme_1_1Implementation')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classshaka_1_1eme_1_1Implementation.html">shaka::eme::Implementation</a></td></tr>
<tr class="memitem:a79d57ff35462753e90036d76c1d474e5 inherit pub_methods_classshaka_1_1eme_1_1Implementation"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1Implementation.html#a79d57ff35462753e90036d76c1d474e5">Implementation</a> ()</td></tr>
<tr class="separator:a79d57ff35462753e90036d76c1d474e5 inherit pub_methods_classshaka_1_1eme_1_1Implementation"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa795ce22c3cb8ac12075f43e6e2cd0a1 inherit pub_methods_classshaka_1_1eme_1_1Implementation"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1Implementation.html#aa795ce22c3cb8ac12075f43e6e2cd0a1">~ Implementation</a> ()</td></tr>
<tr class="separator:aa795ce22c3cb8ac12075f43e6e2cd0a1 inherit pub_methods_classshaka_1_1eme_1_1Implementation"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af439103ff14bd720ba5edc8e66cccd83 inherit pub_methods_classshaka_1_1eme_1_1Implementation"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1Implementation.html#af439103ff14bd720ba5edc8e66cccd83">Implementation</a> (const <a class="el" href="classshaka_1_1eme_1_1Implementation.html">Implementation</a> &amp;)=delete</td></tr>
<tr class="separator:af439103ff14bd720ba5edc8e66cccd83 inherit pub_methods_classshaka_1_1eme_1_1Implementation"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f9ab88a3ee63206d0520b6756f9e79e inherit pub_methods_classshaka_1_1eme_1_1Implementation"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classshaka_1_1eme_1_1Implementation.html">Implementation</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1Implementation.html#a2f9ab88a3ee63206d0520b6756f9e79e">operator=</a> (const <a class="el" href="classshaka_1_1eme_1_1Implementation.html">Implementation</a> &amp;)=delete</td></tr>
<tr class="separator:a2f9ab88a3ee63206d0520b6756f9e79e inherit pub_methods_classshaka_1_1eme_1_1Implementation"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ed7388c75d27c342f5a543b2b1611b3 inherit pub_methods_classshaka_1_1eme_1_1Implementation"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1Implementation.html#a4ed7388c75d27c342f5a543b2b1611b3">Implementation</a> (<a class="el" href="classshaka_1_1eme_1_1Implementation.html">Implementation</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a4ed7388c75d27c342f5a543b2b1611b3 inherit pub_methods_classshaka_1_1eme_1_1Implementation"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80303271a470e047c4c810a47b3bda80 inherit pub_methods_classshaka_1_1eme_1_1Implementation"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classshaka_1_1eme_1_1Implementation.html">Implementation</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1Implementation.html#a80303271a470e047c4c810a47b3bda80">operator=</a> (<a class="el" href="classshaka_1_1eme_1_1Implementation.html">Implementation</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a80303271a470e047c4c810a47b3bda80 inherit pub_methods_classshaka_1_1eme_1_1Implementation"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a7e8d1855963dce763a3f6acfd6e34f98"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#a7e8d1855963dce763a3f6acfd6e34f98">ClearKeyImplementationTest</a></td></tr>
<tr class="separator:a7e8d1855963dce763a3f6acfd6e34f98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a52c2851b6fa84c3e7232751400b29a"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#a3a52c2851b6fa84c3e7232751400b29a">media::DecoderIntegration</a></td></tr>
<tr class="separator:a3a52c2851b6fa84c3e7232751400b29a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab59c563c5deedd3aa03f6c89405142ab"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#ab59c563c5deedd3aa03f6c89405142ab">media::DecoderDecryptIntegration</a></td></tr>
<tr class="separator:ab59c563c5deedd3aa03f6c89405142ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="clearkey__implementation_8h_source.html#l00039">39</a> of file <a class="el" href="clearkey__implementation_8h_source.html">clearkey_implementation.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af3689ca97769d6f06c05810b55f6deb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3689ca97769d6f06c05810b55f6deb6">&sect;&nbsp;</a></span>ClearKeyImplementation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">shaka::eme::ClearKeyImplementation::ClearKeyImplementation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classshaka_1_1eme_1_1ImplementationHelper.html">ImplementationHelper</a> *&#160;</td>
          <td class="paramname"><em>helper</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="clearkey__implementation_8cc_source.html#l00214">214</a> of file <a class="el" href="clearkey__implementation_8cc_source.html">clearkey_implementation.cc</a>.</p>

</div>
</div>
<a id="afced27a6756fdf8f2f9470d55325ac27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afced27a6756fdf8f2f9470d55325ac27">&sect;&nbsp;</a></span>~ClearKeyImplementation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">shaka::eme::ClearKeyImplementation::~ClearKeyImplementation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="clearkey__implementation_8cc_source.html#l00216">216</a> of file <a class="el" href="clearkey__implementation_8cc_source.html">clearkey_implementation.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab33d69d311b2a41805aa5805f0f6f230"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab33d69d311b2a41805aa5805f0f6f230">&sect;&nbsp;</a></span>Close()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void shaka::eme::ClearKeyImplementation::Close </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>session_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a>&#160;</td>
          <td class="paramname"><em>promise</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Closes the given session. This does NOT delete persistent sessions, it only closes the current running session and any runtime data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session_id</td><td>The session ID to close. </td></tr>
    <tr><td class="paramname">promise</td><td>The <a class="el" href="classshaka_1_1Promise.html">Promise</a> object. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classshaka_1_1eme_1_1Implementation.html#a6ef9da285971f4f6e14a71be8297079b">shaka::eme::Implementation</a>.</p>

<p>Definition at line <a class="el" href="clearkey__implementation_8cc_source.html#l00304">304</a> of file <a class="el" href="clearkey__implementation_8cc_source.html">clearkey_implementation.cc</a>.</p>

</div>
</div>
<a id="ab21f50fd5cd9b19ed69eda6a7c26cca2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab21f50fd5cd9b19ed69eda6a7c26cca2">&sect;&nbsp;</a></span>CreateSessionAndGenerateRequest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void shaka::eme::ClearKeyImplementation::CreateSessionAndGenerateRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a>&#160;</td>
          <td class="paramname"><em>promise</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; void(const std::string &amp;)&gt;&#160;</td>
          <td class="paramname"><em>set_session_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__eme.html#ga758312bea988b050d2a2c16edd1429f1">MediaKeySessionType</a>&#160;</td>
          <td class="paramname"><em>session_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__eme.html#gadf03d085b5131351975708008dffeeac">MediaKeyInitDataType</a>&#160;</td>
          <td class="paramname"><em>init_data_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classshaka_1_1eme_1_1Data.html">Data</a>&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This method creates a new session and generates a license request. This is only called for new session, not for loading persistent sessions.</p>
<p>This should call <em>set_session_id</em> before sending any messages so the session ID is set. The function must only be called once.</p>
<p>This method should create a message to send the license request. This will only be called with init data types where <a class="el" href="classshaka_1_1eme_1_1ImplementationFactory.html#a788359b605d57bb17d0cb889f35708c4">ImplementationFactory::SupportsInitDataType()</a> returns true.</p>
<p>The <a class="el" href="classshaka_1_1Promise.html">Promise</a> should be resolved when the request has been generated, NOT when the response comes back. This should call <a class="el" href="classshaka_1_1eme_1_1ImplementationHelper.html#afecb7979171ede550d2676e008308a00">ImplementationHelper::OnMessage()</a> before resolving the <a class="el" href="classshaka_1_1Promise.html">Promise</a>.</p>
<p>There are situations where this may not generate the license request immediately, for example if the device isn't provisioned. This will still generate a message, but it may not be a license request.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">promise</td><td>The <a class="el" href="classshaka_1_1Promise.html">Promise</a> object. </td></tr>
    <tr><td class="paramname">set_session_id</td><td>A function that accepts the session ID of the new session. </td></tr>
    <tr><td class="paramname">session_type</td><td>The type of session to create. </td></tr>
    <tr><td class="paramname">init_data_type</td><td>The type of init data given </td></tr>
    <tr><td class="paramname">data</td><td>The data contents of the request. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classshaka_1_1eme_1_1Implementation.html#aa73b2f43ebfa9477f1228c41aea03085">shaka::eme::Implementation</a>.</p>

<p>Definition at line <a class="el" href="clearkey__implementation_8cc_source.html#l00241">241</a> of file <a class="el" href="clearkey__implementation_8cc_source.html">clearkey_implementation.cc</a>.</p>

</div>
</div>
<a id="a6f8919b2f2eedf476e614ea00c49f104"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f8919b2f2eedf476e614ea00c49f104">&sect;&nbsp;</a></span>Decrypt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__eme.html#ga538e615366fe4f2044cd1166e186c5a6">DecryptStatus</a> shaka::eme::ClearKeyImplementation::Decrypt </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classshaka_1_1eme_1_1FrameEncryptionInfo.html">FrameEncryptionInfo</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Decrypts the given data. This is given a whole frame and is expected to decrypt the encrypted portions and copy over clear portions. This method doesn't need to handle containers or codecs, all it needs to do is decrypt and copy the data. If the data needs to be processed before decryption (e.g. for MPEG2-TS), it is done by the caller.</p>
<p>If pattern is (0, 0), then this is not using pattern encryption (e.g. for "cenc" or "cbc1").</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">info</td><td>Contains information about how the frame is encrypted. </td></tr>
    <tr><td class="paramname">data</td><td>The data to decrypt. </td></tr>
    <tr><td class="paramname">data_size</td><td>The size of |data|. </td></tr>
    <tr><td class="paramname">dest</td><td>The destination buffer to hold the decrypted data. Is at least |data_size| bytes large. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The resulting status code. </dd></dl>

<p>Implements <a class="el" href="classshaka_1_1eme_1_1Implementation.html#a4ea0ef3fac03a27a9eb8c80ca2a36c16">shaka::eme::Implementation</a>.</p>

<p>Definition at line <a class="el" href="clearkey__implementation_8cc_source.html#l00317">317</a> of file <a class="el" href="clearkey__implementation_8cc_source.html">clearkey_implementation.cc</a>.</p>

</div>
</div>
<a id="aadb7147b458be9b6693438cf3bc7a63e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadb7147b458be9b6693438cf3bc7a63e">&sect;&nbsp;</a></span>GetExpiration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool shaka::eme::ClearKeyImplementation::GetExpiration </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>session_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t *&#160;</td>
          <td class="paramname"><em>expiration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Gets the expiration of the session. This should give the time in milliseconds since the epoch, or -1 if the session never expires.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session_id</td><td>The ID of the session to get the expiration for. </td></tr>
    <tr><td class="paramname">expiration</td><td>[OUT] Where to put the expiration time. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, false on error. </dd></dl>

<p>Implements <a class="el" href="classshaka_1_1eme_1_1Implementation.html#a4f5c06634dcdef921813a3ccc859e938">shaka::eme::Implementation</a>.</p>

<p>Definition at line <a class="el" href="clearkey__implementation_8cc_source.html#l00218">218</a> of file <a class="el" href="clearkey__implementation_8cc_source.html">clearkey_implementation.cc</a>.</p>

</div>
</div>
<a id="a03b842af5e58a9d0daab2d5489dc941c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03b842af5e58a9d0daab2d5489dc941c">&sect;&nbsp;</a></span>GetKeyStatuses()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool shaka::eme::ClearKeyImplementation::GetKeyStatuses </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>session_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structshaka_1_1eme_1_1KeyStatusInfo.html">KeyStatusInfo</a> &gt; *&#160;</td>
          <td class="paramname"><em>statuses</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Gets the status of each key in the given session. These values can be cached to avoid extra overhead. This means that the key status may have changed but not be reflected yet (e.g. they may have expired).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session_id</td><td>The ID of the session to query. </td></tr>
    <tr><td class="paramname">statuses</td><td>[OUT] Where to put the resulting statuses. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, false on error. </dd></dl>

<p>Implements <a class="el" href="classshaka_1_1eme_1_1Implementation.html#a48bd8fc6b51da3ef81941423a4bade08">shaka::eme::Implementation</a>.</p>

<p>Definition at line <a class="el" href="clearkey__implementation_8cc_source.html#l00224">224</a> of file <a class="el" href="clearkey__implementation_8cc_source.html">clearkey_implementation.cc</a>.</p>

</div>
</div>
<a id="a00d5114faf84283288f210cf006ee5b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00d5114faf84283288f210cf006ee5b4">&sect;&nbsp;</a></span>Load()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void shaka::eme::ClearKeyImplementation::Load </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>session_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a>&#160;</td>
          <td class="paramname"><em>promise</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Loads the given session from persistent storage.</p>
<p>This should use ResolveWith() and pass true if the session was found, false if the session didn't exist. This should still reject for errors.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session_id</td><td>The session ID to load. </td></tr>
    <tr><td class="paramname">promise</td><td>The <a class="el" href="classshaka_1_1Promise.html">Promise</a> object. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classshaka_1_1eme_1_1Implementation.html#a4d98fcba3737b4d4676b1e08061f2455">shaka::eme::Implementation</a>.</p>

<p>Definition at line <a class="el" href="clearkey__implementation_8cc_source.html#l00269">269</a> of file <a class="el" href="clearkey__implementation_8cc_source.html">clearkey_implementation.cc</a>.</p>

</div>
</div>
<a id="a1b754adf6acccaf608ad36ca622fbb98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b754adf6acccaf608ad36ca622fbb98">&sect;&nbsp;</a></span>Remove()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void shaka::eme::ClearKeyImplementation::Remove </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>session_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a>&#160;</td>
          <td class="paramname"><em>promise</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Removes any persistent data associated with the given session.</p>
<p>This should generate a 'license-release' message. The session should not actually be deleted until the response is given to <a class="el" href="classshaka_1_1eme_1_1ClearKeyImplementation.html#a7a94cdc548706d1f41de0ca99ae4983c">Update()</a>. However, the <a class="el" href="classshaka_1_1Promise.html">Promise</a> should be resolved once the message is generated.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session_id</td><td>The session ID to delete. </td></tr>
    <tr><td class="paramname">promise</td><td>The <a class="el" href="classshaka_1_1Promise.html">Promise</a> object. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classshaka_1_1eme_1_1Implementation.html#a759d4cedae1c6b4d7234038976a1dcf9">shaka::eme::Implementation</a>.</p>

<p>Definition at line <a class="el" href="clearkey__implementation_8cc_source.html#l00311">311</a> of file <a class="el" href="clearkey__implementation_8cc_source.html">clearkey_implementation.cc</a>.</p>

</div>
</div>
<a id="a5ba69e95950c3e8da38b55427f1cad08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ba69e95950c3e8da38b55427f1cad08">&sect;&nbsp;</a></span>SetServerCertificate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void shaka::eme::ClearKeyImplementation::SetServerCertificate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a>&#160;</td>
          <td class="paramname"><em>promise</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classshaka_1_1eme_1_1Data.html">Data</a>&#160;</td>
          <td class="paramname"><em>cert</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sets the server certificate for the CDM.</p>
<p>This should use <a class="el" href="classshaka_1_1eme_1_1EmePromise.html#a0b13e604be586471d7a035de2cdf3785">EmePromise::ResolveWith()</a> and pass true for supported and false for not supported. This should only reject for errors in the certificate.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">promise</td><td>The <a class="el" href="classshaka_1_1Promise.html">Promise</a> object. </td></tr>
    <tr><td class="paramname">cert</td><td>The data contents of the certificate. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classshaka_1_1eme_1_1Implementation.html#a633b3a80a52442ca3f6b9efd3bfc2023">shaka::eme::Implementation</a>.</p>

<p>Definition at line <a class="el" href="clearkey__implementation_8cc_source.html#l00236">236</a> of file <a class="el" href="clearkey__implementation_8cc_source.html">clearkey_implementation.cc</a>.</p>

</div>
</div>
<a id="a7a94cdc548706d1f41de0ca99ae4983c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a94cdc548706d1f41de0ca99ae4983c">&sect;&nbsp;</a></span>Update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void shaka::eme::ClearKeyImplementation::Update </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>session_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classshaka_1_1eme_1_1EmePromise.html">EmePromise</a>&#160;</td>
          <td class="paramname"><em>promise</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classshaka_1_1eme_1_1Data.html">Data</a>&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Updates the given session with a response from the server.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session_id</td><td>The session ID to use. </td></tr>
    <tr><td class="paramname">promise</td><td>The <a class="el" href="classshaka_1_1Promise.html">Promise</a> object. </td></tr>
    <tr><td class="paramname">data</td><td>The data contents of the response. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classshaka_1_1eme_1_1Implementation.html#a1cda56831a4c9b3f7ad176ff3ec7d786">shaka::eme::Implementation</a>.</p>

<p>Definition at line <a class="el" href="clearkey__implementation_8cc_source.html#l00275">275</a> of file <a class="el" href="clearkey__implementation_8cc_source.html">clearkey_implementation.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a7e8d1855963dce763a3f6acfd6e34f98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e8d1855963dce763a3f6acfd6e34f98">&sect;&nbsp;</a></span>ClearKeyImplementationTest</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class ClearKeyImplementationTest</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="clearkey__implementation_8h_source.html#l00093">93</a> of file <a class="el" href="clearkey__implementation_8h_source.html">clearkey_implementation.h</a>.</p>

</div>
</div>
<a id="ab59c563c5deedd3aa03f6c89405142ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab59c563c5deedd3aa03f6c89405142ab">&sect;&nbsp;</a></span>media::DecoderDecryptIntegration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class media::DecoderDecryptIntegration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="clearkey__implementation_8h_source.html#l00095">95</a> of file <a class="el" href="clearkey__implementation_8h_source.html">clearkey_implementation.h</a>.</p>

</div>
</div>
<a id="a3a52c2851b6fa84c3e7232751400b29a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a52c2851b6fa84c3e7232751400b29a">&sect;&nbsp;</a></span>media::DecoderIntegration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class media::DecoderIntegration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="clearkey__implementation_8h_source.html#l00094">94</a> of file <a class="el" href="clearkey__implementation_8h_source.html">clearkey_implementation.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>shaka/src/eme/<a class="el" href="clearkey__implementation_8h_source.html">clearkey_implementation.h</a></li>
<li>shaka/src/eme/<a class="el" href="clearkey__implementation_8cc_source.html">clearkey_implementation.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
